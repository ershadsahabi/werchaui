/* components/blog/filters.module.css
   ───────── Blog Filters — Borderless Inputs + Strong Selected Category + No Focus Shift ─────────
   - Inputs/Selects: border:none + persistent inset line
   - Focus: no visual change (no ring/border/transform) → only caret appears
   - Category chip (active): high-contrast with proper on-primary
*/

/* ===================== Layout ===================== */
.wrap{
  display:grid;
  grid-template-columns:3fr 1fr; /* search larger than ordering */
  gap:var(--sp-3);
  align-items:end;
}
@media (max-width:1200px){ .wrap{ grid-template-columns:2fr 1fr } }
@media (max-width:900px){ .wrap{ grid-template-columns:1fr 1fr } }
@media (max-width:640px){ .wrap{ grid-template-columns:1fr; align-items:stretch } }

.field{ display:grid; gap:var(--sp-2) }
.fieldGrow{ grid-column:span 1 }
.label{ font-size:.9rem; color:var(--text-weak) }

/* ===================== Card Chrome ===================== */
.cardChrome{
  position:relative; overflow:hidden;
  border:none !important;
  background:var(--glass-2);
  box-shadow:var(--elev-xs);
  backdrop-filter:var(--backdrop);
  padding:var(--sp-4);

  /* local tokens for controls */
  --bl-field-line:       var(--field-line, color-mix(in oklab, var(--text) 12%, transparent));
  --bl-field-line-focus: var(--field-line-focus, var(--bl-field-line));
  --bl-field-bg:         var(--field-bg, color-mix(in oklab, var(--surface-2) 92%, transparent 8%));
  --bl-field-bg-focus:   var(--field-bg-focus, var(--bl-field-bg));
  --bl-field-radius:     12px;
  --bl-field-pad-x:      var(--input-pad-x, 12px);
  --bl-field-pad-y:      var(--input-pad-y, 10px);

  /* placeholder tone (will be tuned per-theme below) */
  --bl-placeholder:      var(--input-ph, var(--text-mute));

  /* chips palette */
  --chip-bg:            color-mix(in oklab, var(--primary) 10%, var(--surface));
  --chip-bg-hover:      color-mix(in oklab, var(--primary) 14%, var(--surface));
  --chip-text:          var(--text);

  --chip-act-bg:        color-mix(in oklab, var(--primary) 82%, var(--surface) 18%);
  --chip-act-text:      var(--on-primary);
  --chip-press-bg:      color-mix(in oklab, var(--primary-press, var(--primary)) 88%, var(--surface) 12%);
}

/* ===================== Controls (borderless + persistent line) ===================== */
.control{
  height:48px;
  border:none !important;                                /* ✅ no border */
  border-radius:var(--bl-field-radius);
  padding-inline:var(--bl-field-pad-x);
  color:var(--text);
  background:var(--bl-field-bg);
  box-shadow:inset 0 0 0 1px var(--bl-field-line) !important;  /* ✅ persistent line */
  outline:none;

  /* no transform in transitions → prevent “jump” on focus */
  transition:background-color var(--dur-150), filter var(--dur-150), box-shadow var(--dur-150);
}
@media (max-width:640px){ .control{ height:52px } }

.control:hover{ filter:brightness(1.02) }

/* Focus: absolutely no visual change (no ring/border/transform) */
.control:focus,
.control:focus-visible{
  outline:none;
  background:var(--bl-field-bg-focus);                   /* same as rest */
  box-shadow:inset 0 0 0 1px var(--bl-field-line-focus) !important;
} 

/* ===================== Input with icon ===================== */
.input{
  background:color-mix(in oklab, var(--surface) 94%, transparent);
  border:none !important;
  caret-color:var(--primary);                             /* ✅ only caret stands out */
}
.input::placeholder{ color:var(--bl-placeholder) }        /* ✅ now theme-tunable */
.inputIcon{ color:var(--text-mute) }

/* ===================== Select (ordering) — borderless + custom arrow ===================== */
.selectWrap{ position:relative }
.select{
  appearance:none; -webkit-appearance:none;
  border:none !important;
  background:var(--bl-field-bg);
  color:var(--text);
  padding-inline-end:calc(var(--select-pad-r, 28px) + var(--bl-field-pad-x));
  box-shadow:inset 0 0 0 1px var(--bl-field-line) !important;
  caret-color:var(--primary);
}
.select:hover{ filter:brightness(1.02) }
/* no visual change on focus */
.select:focus,
.select:focus-visible{
  outline:none;
  background:var(--bl-field-bg-focus);
  box-shadow:inset 0 0 0 1px var(--bl-field-line-focus) !important;
}

/* custom arrow */
.selectWrap::after{
  content:"▾";
  position:absolute; inset-inline-end:12px; inset-block:0;
  display:grid; place-items:center;
  color:var(--text-mute);
  pointer-events:none;
}

/* dropdown options readable */
.select option{ background:var(--surface); color:var(--text) }
html.light .select option{ background:var(--surface); color:var(--text) }

/* ===================== Chips (categories) ===================== */
.chipsRow{
  display:flex; gap:8px; align-items:center; flex-wrap:wrap;
  margin-block:var(--sp-3) var(--sp-2);
}
@media (max-width:768px){
  .chipsRow{ flex-wrap:nowrap; overflow-x:auto; padding-bottom:2px; -ms-overflow-style:none; scrollbar-width:none }
  .chipsRow::-webkit-scrollbar{ display:none }
}

/* default: soft */
.chip{
  border:none;
  background:var(--chip-bg);
  color:var(--chip-text);
  padding:8px 12px;
  border-radius:var(--r-pill);
  font-size:.9rem; line-height:1; white-space:nowrap;
  transition:background var(--dur-150), transform var(--dur-150), box-shadow var(--dur-150), filter var(--dur-150);
  box-shadow:var(--elev-xs);
}
.chip:hover{ background:var(--chip-bg-hover); transform:translateY(-1px) }
.chip:active{ background:var(--chip-press-bg) }

/* selected: strong contrast + proper on-primary */
.chipActive,
.chip[aria-pressed="true"]{
  background:var(--chip-act-bg) !important;
  color:var(--chip-act-text) !important;
  box-shadow:0 10px 22px color-mix(in oklab, var(--primary) 30%, transparent);
  font-weight:800;
}

/* keyboard focus for chips */
.chip:focus-visible{
  outline:none;
  box-shadow:0 0 0 2px var(--focus-ring), var(--elev-sm);
}

/* ===================== Footer / Actions ===================== */
.footerRow{
  display:flex; align-items:center; justify-content:space-between;
  margin-top:var(--sp-2);
}
.actions{ display:flex; gap:8px }
.clearBtn{
  border:none;
  background:color-mix(in oklab, var(--text) 6%, transparent);
}
.clearBtn:hover{ background:color-mix(in oklab, var(--text) 10%, transparent) }

/* ===================== Focus reset for generic clickables ===================== */
:where(a, button, [role="button"]):focus-visible{
  outline:none;
  box-shadow:0 0 0 3px color-mix(in oklab, var(--focus-ring) 60%, transparent);
}

/* === Light Mode Tuning — explicit placeholder tone ===================== */
html.light .cardChrome{
  /* کمی پررنگ‌تر برای دید بهتر روی زمینه روشن */
  --bl-placeholder: color-mix(in oklab, var(--ink-700l) 62%, transparent);
}

/* === Dark Mode Tuning — better contrast without changing focus behavior === */
:global(html):not(.light) .cardChrome{
  /* خط دور کنترل‌ها کمی روشن‌تر و پس‌زمینه کمی متضادتر */
  --bl-field-line:       color-mix(in oklab, #ffffff 20%, transparent);
  --bl-field-line-focus: var(--bl-field-line);
  --bl-field-bg:         color-mix(in oklab, var(--surface) 86%, transparent 14%);
  --bl-field-bg-focus:   var(--bl-field-bg);

  /* placeholder خواناتر در شب */
  --bl-placeholder:      color-mix(in oklab, #e9f2fb 60%, transparent);

  /* چیپ‌ها: اختلاف پیش‌فرض/هاور/اکتیو واضح‌تر */
  --chip-bg:        color-mix(in oklab, var(--primary) 14%, var(--surface));
  --chip-bg-hover:  color-mix(in oklab, var(--primary) 18%, var(--surface));
  /* اکتیو کاملاً قابل‌تشخیص، ولی نه زننده */
  --chip-act-bg:    color-mix(in oklab, var(--primary) 74%, var(--ink-900) 26%);
  --chip-act-text:  var(--on-primary);
}

/* ورودی/سلکت: همون «خط ثابت» بدون هیچ تغییر بصری در فوکوس */
/* === Dark Mode Tuning — better contrast without changing focus behavior === */
:global(html:not(.light)) .cardChrome{
  /* خط دور کنترل‌ها کمی روشن‌تر و پس‌زمینه کمی متضادتر */
  --bl-field-line:       color-mix(in oklab, #ffffff 20%, transparent);
  --bl-field-line-focus: var(--bl-field-line);
  --bl-field-bg:         color-mix(in oklab, var(--surface) 86%, transparent 14%);
  --bl-field-bg-focus:   var(--bl-field-bg);

  /* placeholder خواناتر در شب */
  --bl-placeholder:      color-mix(in oklab, #e9f2fb 60%, transparent);

  /* چیپ‌ها: اختلاف پیش‌فرض/هاور/اکتیو واضح‌تر */
  --chip-bg:        color-mix(in oklab, var(--primary) 14%, var(--surface));
  --chip-bg-hover:  color-mix(in oklab, var(--primary) 18%, var(--surface));
  /* اکتیو کاملاً قابل‌تشخیص، ولی نه زننده */
  --chip-act-bg:    color-mix(in oklab, var(--primary) 74%, var(--ink-900) 26%);
  --chip-act-text:  var(--on-primary);
}

/* ورودی/سلکت: «خط ثابت» بدون هیچ تغییر بصری در فوکوس */
:global(html:not(.light)) .control{
  background: var(--bl-field-bg);
  box-shadow: inset 0 0 0 1px var(--bl-field-line) !important;
}
:global(html:not(.light)) .control:hover{
  filter: brightness(1.015);
}
:global(html:not(.light)) .control:focus,
:global(html:not(.light)) .control:focus-visible{
  outline: none;
  background: var(--bl-field-bg-focus);
  box-shadow: inset 0 0 0 1px var(--bl-field-line) !important; /* ثابت */
}

/* ورودی جستجو در شب: کرسر پرایمری + placeholder خوانا */
:global(html:not(.light)) .input{
  caret-color: var(--primary);
  /* اگر بخوای کمی متضادتر باشه: */
  /* background: color-mix(in oklab, var(--surface) 90%, transparent); */
}
:global(html:not(.light)) .input::placeholder{
  color: var(--bl-placeholder);
  opacity: 1;
}

/* سلکت: فلش خواناتر در شب، سایر حالات مثل قبل */
:global(html:not(.light)) .select{ caret-color: var(--primary) }
:global(html:not(.light)) .selectWrap::after{ color: var(--text-weak) }

/* چیپ‌ها در شب */
:global(html:not(.light)) .chip{
  background: var(--chip-bg);
  color: var(--text);
}
:global(html:not(.light)) .chip:hover{
  background: var(--chip-bg-hover);
}
:global(html:not(.light)) .chipActive,
:global(html:not(.light)) .chip[aria-pressed="true"]{
  background: var(--chip-act-bg) !important;
  color: var(--chip-act-text) !important;
  box-shadow: 0 10px 22px color-mix(in oklab, var(--primary) 28%, transparent);
  font-weight: 800;
}




/* قوانین محکم و scoped؛ فقط اگر لازم شد */
.cardChrome input::placeholder { color: var(--input-ph) !important; }
.cardChrome input::-webkit-input-placeholder { color: var(--input-ph) !important; } /* برای ساپورت Safari قدیمی‌تر */




/* --- در انتهای components/blog/filters.module.css اضافه کن --- */

/* ظرف وضعیت */
.status {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  min-height: 20px; /* ارتفاع ثابت تا پرش layout نداشته باشیم */
}

/* متن وضعیت (خلاصهٔ فیلترها) */
.statusText {
  color: var(--text-weak);
  font-size: .9rem;
}

/* اسپینر کوچک و خنثی */
@keyframes bl-spin { to { transform: rotate(360deg); } }
.spinner {
  inline-size: 16px;
  block-size: 16px;
  border: 2px solid currentColor;
  border-inline-start-color: transparent;
  border-radius: 50%;
  animation: bl-spin 800ms linear infinite;
  opacity: .75;
}
