/* ───────────────── PRODUCTS (Card) ───────────────── */
/* موبایل‌فرست • هماهنگ با :root و html.light در variables.css */

/* کارت با کنتراست و مرز مشخص‌تر */
.card {
  background:
    linear-gradient(180deg,
      color-mix(in oklab, var(--surface) 96%, transparent 4%),
      color-mix(in oklab, var(--surface-2) 92%, transparent 8%)
    );
  border: 1px solid var(--border-strong);     /* مرز کمی پررنگ‌تر */
  border-radius: calc(var(--radius) + 2px);
  overflow: clip;
  box-shadow: var(--shadow-xs);
  transition: transform .16s ease, border-color .16s ease, box-shadow .16s ease, filter .16s ease;
  display: grid;
  grid-template-rows: auto 1fr;
}

/* موبایل: هر خط دقیقاً یک کارت */
@media (max-width: 639.98px) {
  .card { grid-column: 1 / -1; }
}

.card:hover {
  transform: translateY(-1px);
  border-color: color-mix(in oklab, var(--border-strong) 70%, var(--text) 30%);
  box-shadow: 0 14px 28px color-mix(in oklab, #000 18%, transparent);
  filter: brightness(1.012);
}

/* حالت فوکوس برای دسترس‌پذیری و مرز مشخص */
.card:focus-within {
  outline: none;
  box-shadow:
    0 0 0 2px color-mix(in oklab, var(--focus-ring) 65%, transparent),
    0 10px 22px color-mix(in oklab, var(--focus-ring) 18%, transparent);
  border-color: var(--focus-ring);
}

/* ── Media (قاب تصویر هوشمند) ───────────────────── */
.thumb {
  position: relative;
  aspect-ratio: 1 / 1; /* پیش‌فرض: مربع */
  overflow: clip;
  background: var(--surface-2);

  /* قاب واضح برای تصویر: مرز + سایهٔ درونی کم‌رنگ */
  border-bottom: 1px solid var(--border-strong);           /* مرز بین عکس و بدنه */
  box-shadow:
    inset 0 0 0 1px color-mix(in oklab, var(--glass-border) 70%, var(--border-strong) 30%),
    inset 0 -1px 0 0 var(--border-strong);                 /* لبه‌ی پایینِ عکس */
}
.portrait { aspect-ratio: 4 / 5; }   /* عمودی */
.landscape { aspect-ratio: 3 / 2; }  /* افقی */
.square { aspect-ratio: 1 / 1; }     /* مربع */

@media (max-width: 639.98px) {
  .thumb { max-block-size: min(68vh, 560px); }
}

/* تصویر بدون کشیدگی */
.thumb :global(img),
.cardMedia :global(img),
.cardImg {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  display: block;
}

/* Hairline تفکیک‌کنندهٔ ظریف زیر عکس (تقویت مرزبندی در تم روشن/تیره) */
.thumb::after {
  content: "";
  position: absolute;
  inset-inline: 0;
  inset-block-end: -1px;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    color-mix(in oklab, var(--border-strong) 85%, transparent) 20%,
    color-mix(in oklab, var(--border-strong) 85%, transparent) 80%,
    transparent 100%
  );
  pointer-events: none;
}

/* ── Badgeها ─────────────────────────────────────── */
.badge {
  position: absolute;
  inset-inline-start: 8px;
  inset-block-start: 8px;
  background: var(--accent);
  color: var(--on-accent);
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 800;
  font-size: 12px;
  letter-spacing: .01em;
  z-index: 2;
  box-shadow: var(--shadow-xs);
}

.badgeOut {
  position: absolute;
  inset-inline-end: 8px;
  inset-block-start: 8px;
  background: var(--danger);
  color: var(--on-danger);
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 900;
  font-size: 12px;
  letter-spacing: .01em;
  z-index: 2;
  box-shadow: var(--shadow-xs);
}

.stockBadge {
  position: absolute;
  inset-inline-start: 8px;
  inset-block-end: 8px;
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 900;
  font-size: 12px;
  letter-spacing: .01em;
  z-index: 2;
  box-shadow: var(--shadow-xs);
  border: 1px solid color-mix(in oklab, var(--success) 35%, var(--border));
  background: color-mix(in oklab, var(--success) 22%, var(--surface));
  color: var(--on-success);
}

/* ── Body ───────────────────────────────────────── */
.body {
  padding: 10px 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  background:
    linear-gradient(180deg,
      color-mix(in oklab, var(--surface) 98%, transparent 2%),
      var(--surface)
    );
}

/* ردیف عنوان + برند (در یک خط با فاصله‌ی منطقی) */
.head {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
}

/* Title (سمت راست در RTL) */
.title {
  margin: 0;
  font-size: 14.25px;
  line-height: 1.45;
  color: var(--text);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  flex: 1 1 auto;
  min-width: 0;
}

/* برند (چیپ سمت چپ همان ردیف) */
.brand {
  flex: 0 0 auto;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  border-radius: 999px;
  background:
    linear-gradient(180deg,
      color-mix(in oklab, var(--chip-bg) 92%, transparent 8%),
      var(--chip-bg)
    );
  color: var(--chip-text);
  border: 1px solid var(--glass-border);
  font-size: 12px;
  font-weight: 700;
  letter-spacing: .01em;
  box-shadow: var(--shadow-xs);
  opacity: .98;
  max-width: 48%;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}
.brand::before {
  content: '🏷️';
  font-size: 12px;
  line-height: 1;
}

/* Meta */
.meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

/* Price — کنتراست بهتر برای هر دو تم */
.price {
  color: var(--primary);
  text-shadow: 0 0 1px color-mix(in oklab, var(--primary) 35%, transparent);
  font-weight: 900;
  font-size: 14.25px;
}
.tmn { font-weight: 700; opacity: .85; }
.price--rose { color: var(--accent); }

/* Rating */
.rating {
  color: var(--warning);
  font-size: 12.25px;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  opacity: .96;
}

/* دکمه افزودن */
.addBtn {
  width: 100%;
  border: 1px solid color-mix(in oklab, var(--btn-bg) 72%, var(--text) 28%);
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--btn-bg) 92%, transparent 8%),
    var(--btn-bg)
  );
  color: var(--on-primary);
  padding: 8px 10px;
  border-radius: 12px;
  font-weight: 900;
  font-size: 13.5px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  transition: transform .14s ease, filter .14s ease, box-shadow .14s ease, border-color .14s ease, background .14s ease;
  box-shadow: 0 10px 22px color-mix(in oklab, var(--btn-bg) 22%, transparent);
}
.addBtn:hover {
  transform: translateY(-1px);
  filter: brightness(1.035);
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--btn-bg-press) 92%, transparent 8%),
    var(--btn-bg-press)
  );
  box-shadow: 0 14px 28px color-mix(in oklab, var(--btn-bg-press) 26%, transparent);
}
.addBtn:disabled {
  opacity: .55;
  cursor: not-allowed;
  filter: grayscale(.25);
  border-color: color-mix(in oklab, var(--border) 80%, var(--text) 20%);
  box-shadow: none;
}

/* ── Responsive ─────────────────────────── */
@media (min-width: 640px) {
  .title { font-size: 14.75px; }
  .price { font-size: 14.75px; }
}
