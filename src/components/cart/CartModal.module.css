/* Backdrop */
.backdrop{ position:fixed; inset:0; z-index:var(--z-modal,1000); opacity:0; pointer-events:none; background:rgba(0,0,0,.5); -webkit-backdrop-filter:blur(4px); backdrop-filter:blur(4px); transition:opacity var(--transition-300); }
.open{ opacity:1; pointer-events:auto; }

/* Panel (drawer / bottom sheet) */
.panel{
  position:fixed; inset-inline-end:0; inset-block:0; inline-size:min(460px,92vw);
  background:var(--surface); color:var(--text); border-inline-start:1px solid var(--border);
  box-shadow:-20px 0 60px rgba(0,0,0,.32); transform:translateX(100%); transition:transform var(--transition-300);
  display:grid; grid-template-rows:auto 1fr auto; gap:12px; padding:16px;
}
.slideIn{ transform:translateX(0); }
@media (max-width:640px){
  .panel{ inset-inline:0; inset-block-end:0; inline-size:100%; max-block-size:92vh; transform:translateY(100%); border-inline-start:none; border-block-start:1px solid var(--border); border-top-left-radius:var(--radius-lg); border-top-right-radius:var(--radius-lg); box-shadow:0 -20px 60px rgba(0,0,0,.34); padding-bottom:calc(16px + env(safe-area-inset-bottom)); }
  .slideIn{ transform:translateY(0); }
}

/* Header */
.header{ display:flex; align-items:center; justify-content:space-between; background:var(--surface); border-bottom:1px solid var(--border); padding-block:8px; }
.title{ display:flex; gap:.5rem; font-weight:900; color:var(--text-strong); }
.brand{ font-size:.8rem; font-weight:900; color:var(--primary); }
.headerRight{ display:flex; align-items:center; gap:8px; }
.count{ font-size:.85rem; font-weight:700; color:var(--text-mute); }
.iconBtn{ inline-size:36px; block-size:36px; display:grid; place-items:center; border-radius:999px; border:1px solid var(--border); background:var(--surface-2); color:var(--text); cursor:pointer; transition:transform var(--transition-300), background-color var(--transition-300); }
.iconBtn:hover{ transform:translateY(-1px); }
.iconBtn:active{ transform:translateY(0); }

/* List */
.list{ overflow:auto; display:grid; gap:12px; padding-inline:2px; }

/* Row */
.row{
  direction: rtl;
  display:grid;
  grid-template-columns: 80px 1fr auto;  /* thumb | body | controls */
  gap: 12px;
  align-items: center;
  padding: 12px;
  border-radius: var(--radius);
  background: var(--surface);
  border: 1px solid var(--border);
}
@media (max-width:480px){ .row{ grid-template-columns: 72px 1fr auto; } }

/* Thumb + remove (floating on all screens) */
.thumbWrap{ position:relative; }
.thumb{
  inline-size: 80px; block-size: 80px;
  border-radius: var(--radius-sm); object-fit: cover;
  border: 1px solid var(--border); background: var(--muted);
}
@media (max-width:480px){ .thumb{ inline-size:72px; block-size:72px; } }

.removeFab{
  position:absolute; inset-block-start:6px; inset-inline-start:6px;
  inline-size:28px; block-size:28px; display:grid; place-items:center;
  border-radius:999px; border:1px solid var(--border);
  background:var(--surface-2); color:var(--text);
  cursor:pointer; transition:transform var(--transition-300), background-color var(--transition-300);
  z-index: 1;
}
.removeFab:hover{ transform:translateY(-1px); }

/* ✅ موبایل: دکمه حذف هم نمایش داده شود و کمی بزرگ‌تر و لمسی‌تر باشد */
@media (max-width:640px){
  .removeFab{
    inline-size:40px; block-size:40px;
    inset-block-start:8px; inset-inline-start:8px;
  }
}

/* Body */
.body{ display:grid; gap:6px; align-content:start; min-width:0; }
.name{
  font-weight:900; color:var(--text-strong); line-height:1.35;
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}
.meta{ display:flex; flex-wrap:wrap; gap:6px 12px; align-items:baseline; }
.prices{ display:inline-flex; gap:8px; align-items:baseline; flex-wrap:wrap; }
.sub{ color:var(--text-strong); font-weight:900; }
.unitHint{ color:var(--text-mute); font-weight:700; }
.stockLine{ font-size:.82rem; color:var(--text-mute); }
.out{ color:var(--danger); font-weight:800; }

/* Controls */
.controls{ display:grid; gap:6px; justify-items:end; align-content:start; }
.qty{
  display:grid; grid-auto-flow:column; align-items:center; gap:6px;
  padding:6px; height:40px; border-radius:999px; background:var(--surface); border:1px solid var(--border);
}
.qtyInput{
  inline-size:64px; height:28px; text-align:center; background:var(--surface); color:var(--text-strong);
  border:1px solid var(--border); border-radius:var(--radius-sm); font-weight:800; appearance:textfield;
}
.qtyInput::-webkit-outer-spin-button, .qtyInput::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0; }

/* حذف متنی (دیگر استفاده نمی‌شود) */
.removeInline{ display:none; }

/* Footer */
.footer{ border-top:1px dashed var(--border); padding-top:12px; display:grid; gap:12px; }
.total{ display:inline-flex; align-items:baseline; gap:6px; font-weight:900; color:var(--text-strong); }
.total strong{ color:var(--primary); font-size:1.15rem; }
.unitSuffix{ color:var(--text-mute); font-size:.9rem; }
.actions{ display:grid; grid-template-columns:1fr 1.2fr; gap:10px; }
@media (max-width:640px){ .actions{ grid-template-columns:1fr; } }

/* Buttons */
.primaryBtn, .checkoutBtn{ --h:44px; height:var(--h); display:inline-grid; place-items:center; border-radius:var(--radius); border:1px solid transparent; background:var(--btn-bg); color:var(--btn-text); font-weight:900; transition:transform var(--transition-300), background-color var(--transition-300); }
.primaryBtn:hover, .checkoutBtn:hover{ transform:translateY(-1px); background:var(--btn-bg-press); }
.ghostBtn{ --h:44px; height:var(--h); display:inline-grid; place-items:center; border-radius:var(--radius); border:1px solid var(--border); background:var(--surface); color:var(--text); font-weight:800; transition:transform var(--transition-300), background-color var(--transition-300); }
.ghostBtn:hover{ transform:translateY(-1px); background:var(--surface-2); }

/* Empty */
.empty{ display:grid; place-items:center; gap:12px; padding:24px; text-align:center; }
.emptyImg{ opacity:.9; }
.emptyTitle{ font-weight:900; color:var(--text-strong); }

/* Scrollbar */
.list::-webkit-scrollbar{ inline-size:10px; }
.list::-webkit-scrollbar-thumb{ background:color-mix(in oklab, var(--text) 25%, transparent); border-radius:999px; border:2px solid transparent; background-clip:padding-box; }
@supports (scrollbar-color: auto){
  .list{ scrollbar-color: color-mix(in oklab, var(--text) 25%, transparent) transparent; scrollbar-width: thin; }
}
